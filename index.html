<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Oscar-Lucas Medrano</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      background-color: black;
      overflow: hidden;
      width: 100vw;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #viewer {
      display: flex;
      flex-direction: row;
      gap: 2px;
      justify-content: center;
      align-items: center;
      max-width: 100%;
      max-height: 100%;
      cursor: pointer;
      user-select: none;
    }

    canvas {
      background-color: white;
      box-shadow: 0 0 20px rgba(0,0,0,0.7);
      display: block;
      max-height: 95vh;
      height: auto;
      width: auto;
    }

    @media (max-width: 768px) {
      #viewer {
        flex-direction: row;
        flex-wrap: nowrap;
        overflow-x: auto;
        overflow-y: hidden;
        padding: 0;
      }

      canvas {
        max-width: 95vw;
        height: auto;
      }
    }
  </style>
</head>
<body>
  <div id="viewer"></div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
  <script>
    const pdfs = [
      'page1.pdf',
      'about.pdf',
      'table_of_contents.pdf',
      'page4.pdf',
      'page5.pdf'
    ];

    const viewer = document.getElementById('viewer');
    const pdfjsLib = window['pdfjs-dist/build/pdf'];
    let currentPage = 0;

    async function renderPDF(url) {
      const pdf = await pdfjsLib.getDocument(url).promise;
      const page = await pdf.getPage(1);
      const viewport = page.getViewport({ scale: 2.5 });
      return { page, viewport };
    }

    async function drawCanvas(pdfData, targetHeight = null) {
      const canvas = document.createElement('canvas');
      const context = canvas.getContext('2d');

      let scale = 2.5;
      if (targetHeight) {
        scale = targetHeight / pdfData.viewport.height;
      }

      const scaledViewport = pdfData.page.getViewport({ scale });
      canvas.width = scaledViewport.width;
      canvas.height = scaledViewport.height;

      await pdfData.page.render({
        canvasContext: context,
        viewport: scaledViewport
      }).promise;

      return canvas;
    }

    async function updateViewer() {
      viewer.innerHTML = '';

      if (currentPage === 0) {
        // Render only cover
        const coverPDF = await renderPDF(pdfs[0]);
        const canvas = await drawCanvas(coverPDF);
        viewer.appendChild(canvas);
      } else {
        const leftPDF = await renderPDF(pdfs[currentPage]);
        const rightPDF = pdfs[currentPage + 1] ? await renderPDF(pdfs[currentPage + 1]) : null;

        const maxHeight = Math.max(leftPDF.viewport.height, rightPDF?.viewport.height || 0);

        const leftCanvas = await drawCanvas(leftPDF, maxHeight);
        viewer.appendChild(leftCanvas);

        if (rightPDF) {
          const rightCanvas = await drawCanvas(rightPDF, maxHeight);
          viewer.appendChild(rightCanvas);
        }
      }
    }

    function nextPage() {
      if (currentPage === 0) {
        currentPage = 1;
      } else if (currentPage + 2 < pdfs.length) {
        currentPage += 2;
      }
      updateViewer();
    }

    function prevPage() {
      if (currentPage <= 1) {
        currentPage = 0;
      } else {
        currentPage -= 2;
      }
      updateViewer();
    }

    // Handle arrow keys
    window.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowRight') nextPage();
      if (e.key === 'ArrowLeft') prevPage();
    });

    // Handle clicks (left/right side of screen)
    viewer.addEventListener('click', (e) => {
      const rect = viewer.getBoundingClientRect();
      const clickX = e.clientX - rect.left;
      const middle = rect.width / 2;

      if (clickX < middle) {
        prevPage(); // tap/click left
      } else {
        nextPage(); // tap/click right
      }
    });

    updateViewer();
  </script>
</body>
</html>
